const e=function(e,t){const o={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},n={on(e,t,n){if(void 0===o[e])throw new Error(`Invalid event type: ${e}`);o[e].push({selector:t,fn:n})},render(e){t.store.featureChanged(e)}},r=function(e,r){const i=o[e];let s=i.length;for(;s--;){const e=i[s];if(e.selector(r)){e.fn.call(n,r)||t.store.render(),t.ui.updateMapClasses();break}}};return e.start.call(n),{render:e.render,stop(){e.stop&&e.stop()},trash(){e.trash&&(e.trash(),t.store.render())},combineFeatures(){e.combineFeatures&&e.combineFeatures()},uncombineFeatures(){e.uncombineFeatures&&e.uncombineFeatures()},drag(e){r("drag",e)},click(e){r("click",e)},mousemove(e){r("mousemove",e)},mousedown(e){r("mousedown",e)},mouseup(e){r("mouseup",e)},mouseout(e){r("mouseout",e)},keydown(e){r("keydown",e)},keyup(e){r("keyup",e)},touchstart(e){r("touchstart",e)},touchmove(e){r("touchmove",e)},touchend(e){r("touchend",e)},tap(e){r("tap",e)}}};function t(e,t,o){var n=o;return function(e,t){var o,n,r,i,s,a,c,u,l,d,p=0,h="FeatureCollection"===e.type,f="Feature"===e.type,g=h?e.features.length:1;for(o=0;o<g;o++){for(a=h?e.features[o].geometry:f?e.geometry:e,u=h?e.features[o].properties:f?e.properties:{},l=h?e.features[o].bbox:f?e.bbox:void 0,d=h?e.features[o].id:f?e.id:void 0,s=(c=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(i=c?a.geometries[r]:a))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,p,u,l,d))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===t(i.geometries[n],p,u,l,d))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,p,u,l,d))return!1;p++}}(e,(function(e,o,r,i,s){n=t(n,e,o,r,i,s)})),n}function o(e){let t=0;if(e&&e.length>0){t+=Math.abs(i(e[0]));for(let o=1;o<e.length;o++)t-=Math.abs(i(e[o]))}return t}var n=20294876564838.72,r=Math.PI/180;function i(e){const t=e.length-1;if(t<=2)return 0;let o=0,i=0;for(;i<t;){const n=e[i],s=e[i+1===t?0:i+1],a=e[i+2>=t?(i+2)%t:i+2],c=n[0]*r,u=s[1]*r;o+=(a[0]*r-c)*Math.sin(u),i++}return o*n}var s=function(e){return t(e,((e,t)=>e+function(e){let t,n=0;switch(e.type){case"Polygon":return o(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=o(e.coordinates[t]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)),0)};const a={CANVAS:"mapboxgl-canvas",CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},c="mapbox-gl-draw",u={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},l={POLYGON:"polygon",LINE:"line_string",POINT:"point"},d={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},p={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select"},h={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},f={MOVE:"move",CHANGE_PROPERTIES:"change_properties",CHANGE_COORDINATES:"change_coordinates"},g={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex",ROTATE:"rotate"},m={ACTIVE:"true",INACTIVE:"false"},y=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],E=-85,T=85;var C=Object.freeze({__proto__:null,LAT_MAX:90,LAT_MIN:-90,LAT_RENDERED_MAX:T,LAT_RENDERED_MIN:E,LNG_MAX:270,LNG_MIN:-270,activeStates:m,classes:a,cursors:u,events:h,geojsonTypes:d,interactions:y,meta:g,modes:p,source:c,types:l,updateActions:f});const _={Point:0,LineString:1,MultiLineString:1,Polygon:2};function v(e,t){const o=_[e.geometry.type]-_[t.geometry.type];return 0===o&&e.geometry.type===d.POLYGON?e.area-t.area:o}function I(e){return e.map((e=>(e.geometry.type===d.POLYGON&&(e.area=s(e.geometry)),e))).sort(v).map((e=>(delete e.area,e)))}function S(e,t=0){return[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]}function O(e){if(this._items={},this._nums={},this._length=e?e.length:0,e)for(let t=0,o=e.length;t<o;t++)this.add(e[t]),void 0!==e[t]&&("string"==typeof e[t]?this._items[e[t]]=t:this._nums[e[t]]=t)}O.prototype.add=function(e){return this.has(e)||(this._length++,"string"==typeof e?this._items[e]=this._length:this._nums[e]=this._length),this},O.prototype.delete=function(e){return!1===this.has(e)||(this._length--,delete this._items[e],delete this._nums[e]),this},O.prototype.has=function(e){return("string"==typeof e||"number"==typeof e)&&(void 0!==this._items[e]||void 0!==this._nums[e])},O.prototype.values=function(){const e=[];return Object.keys(this._items).forEach((t=>{e.push({k:t,v:this._items[t]})})),Object.keys(this._nums).forEach((t=>{e.push({k:JSON.parse(t),v:this._nums[t]})})),e.sort(((e,t)=>e.v-t.v)).map((e=>e.k))},O.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};const M=[g.FEATURE,g.MIDPOINT,g.VERTEX,g.ROTATE];var N={click:function(e,t,o){return L(e,t,o,o.options.clickBuffer)},touch:function(e,t,o){return L(e,t,o,o.options.touchBuffer)}};function L(e,t,o,n){if(null===o.map)return[];const r=e?S(e,n):t,i={};o.options.styles&&(i.layers=o.options.styles.map((e=>e.id)).filter((e=>null!=o.map.getLayer(e))));const s=o.map.queryRenderedFeatures(r,i).filter((e=>-1!==M.indexOf(e.properties.meta))),a=new O,c=[];return s.forEach((e=>{const t=e.properties.id;a.has(t)||(a.add(t),c.push(e))})),I(c)}function b(e,t){const o=N.click(e,null,t),n={mouse:u.NONE};return o[0]&&(n.mouse=o[0].properties.active===m.ACTIVE?u.MOVE:u.POINTER,n.feature=o[0].properties.meta),-1!==t.events.currentModeName().indexOf("draw")&&(n.mouse=u.ADD),t.ui.queueMapClasses(n),t.ui.updateMapClasses(),o[0]}function P(e,t){const o=e.x-t.x,n=e.y-t.y;return Math.sqrt(o*o+n*n)}const x=4,A=12,F=500;function w(e,t,o={}){const n=null!=o.fineTolerance?o.fineTolerance:x,r=null!=o.grossTolerance?o.grossTolerance:A,i=null!=o.interval?o.interval:F;e.point=e.point||t.point,e.time=e.time||t.time;const s=P(e.point,t.point);return s<n||s<r&&t.time-e.time<i}const R=25,D=250;function U(e,t,o={}){const n=null!=o.tolerance?o.tolerance:R,r=null!=o.interval?o.interval:D;e.point=e.point||t.point,e.time=e.time||t.time;return P(e.point,t.point)<n&&t.time-e.time<r}const k=((e,t=21)=>(o=t)=>{let n="",r=0|o;for(;r--;)n+=e[Math.random()*e.length|0];return n})("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",32);function V(){return k()}const G=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||V(),this.type=t.geometry.type};G.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},G.prototype.incomingCoords=function(e){this.setCoordinates(e)},G.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},G.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},G.prototype.setProperty=function(e,t){this.properties[e]=t},G.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:d.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},G.prototype.internal=function(e){const t={id:this.id,meta:g.FEATURE,"meta:type":this.type,active:m.INACTIVE,mode:e};if(this.ctx.options.userProperties)for(const e in this.properties)t[`user_${e}`]=this.properties[e];return{type:d.FEATURE,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};const B=function(e,t){G.call(this,e,t)};(B.prototype=Object.create(G.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},B.prototype.updateCoordinate=function(e,t,o){this.coordinates=3===arguments.length?[t,o]:[e,t],this.changed()},B.prototype.getCoordinate=function(){return this.getCoordinates()};const J=function(e,t){G.call(this,e,t)};(J.prototype=Object.create(G.prototype)).isValid=function(){return this.coordinates.length>1},J.prototype.addCoordinate=function(e,t,o){this.changed();const n=parseInt(e,10);this.coordinates.splice(n,0,[t,o])},J.prototype.getCoordinate=function(e){const t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))},J.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)},J.prototype.updateCoordinate=function(e,t,o){const n=parseInt(e,10);this.coordinates[n]=[t,o],this.changed()};const j=function(e,t){G.call(this,e,t),this.coordinates=this.coordinates.map((e=>e.slice(0,-1)))};(j.prototype=Object.create(G.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every((e=>e.length>2))},j.prototype.incomingCoords=function(e){this.coordinates=e.map((e=>e.slice(0,-1))),this.changed()},j.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},j.prototype.addCoordinate=function(e,t,o){this.changed();const n=e.split(".").map((e=>parseInt(e,10)));this.coordinates[n[0]].splice(n[1],0,[t,o])},j.prototype.removeCoordinate=function(e){this.changed();const t=e.split(".").map((e=>parseInt(e,10))),o=this.coordinates[t[0]];o&&(o.splice(t[1],1),o.length<3&&this.coordinates.splice(t[0],1))},j.prototype.getCoordinate=function(e){const t=e.split(".").map((e=>parseInt(e,10))),o=this.coordinates[t[0]];return JSON.parse(JSON.stringify(o[t[1]]))},j.prototype.getCoordinates=function(){return this.coordinates.map((e=>e.concat([e[0]])))},j.prototype.updateCoordinate=function(e,t,o){this.changed();const n=e.split("."),r=parseInt(n[0],10),i=parseInt(n[1],10);void 0===this.coordinates[r]&&(this.coordinates[r]=[]),this.coordinates[r][i]=[t,o]};const $={MultiPoint:B,MultiLineString:J,MultiPolygon:j},Y=(e,t,o,n,r)=>{const i=o.split("."),s=parseInt(i[0],10),a=i[1]?i.slice(1).join("."):null;return e[s][t](a,n,r)},X=function(e,t){if(G.call(this,e,t),delete this.coordinates,this.model=$[t.geometry.type],void 0===this.model)throw new TypeError(`${t.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(t.geometry.coordinates)};function Z(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e}(X.prototype=Object.create(G.prototype))._coordinatesToFeatures=function(e){const t=this.model.bind(this);return e.map((e=>new t(this.ctx,{id:V(),type:d.FEATURE,properties:{},geometry:{coordinates:e,type:this.type.replace("Multi","")}})))},X.prototype.isValid=function(){return this.features.every((e=>e.isValid()))},X.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()},X.prototype.getCoordinate=function(e){return Y(this.features,"getCoordinate",e)},X.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((e=>e.type===d.POLYGON?e.getCoordinates():e.coordinates))))},X.prototype.updateCoordinate=function(e,t,o){Y(this.features,"updateCoordinate",e,t,o),this.changed()},X.prototype.addCoordinate=function(e,t,o){Y(this.features,"addCoordinate",e,t,o),this.changed()},X.prototype.removeCoordinate=function(e){Y(this.features,"removeCoordinate",e),this.changed()},X.prototype.getFeatures=function(){return this.features},Z.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)},Z.prototype.setSelectedCoordinates=function(e){this._ctx.store.setSelectedCoordinates(e),e.reduce(((e,t)=>(void 0===e[t.feature_id]&&(e[t.feature_id]=!0,this._ctx.store.get(t.feature_id).changed()),e)),{})},Z.prototype.getSelected=function(){return this._ctx.store.getSelected()},Z.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},Z.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)},Z.prototype.getFeature=function(e){return this._ctx.store.get(e)},Z.prototype.select=function(e){return this._ctx.store.select(e)},Z.prototype.deselect=function(e){return this._ctx.store.deselect(e)},Z.prototype.deleteFeature=function(e,t={}){return this._ctx.store.delete(e,t)},Z.prototype.addFeature=function(e,t={}){return this._ctx.store.add(e,t)},Z.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},Z.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},Z.prototype.setActionableState=function(e={}){const t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)},Z.prototype.changeMode=function(e,t={},o={}){return this._ctx.events.changeMode(e,t,o)},Z.prototype.fire=function(e,t){return this._ctx.events.fire(e,t)},Z.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)},Z.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)},Z.prototype.featuresAt=function(e,t,o="click"){if("click"!==o&&"touch"!==o)throw new Error("invalid buffer type");return N[o](e,t,this._ctx)},Z.prototype.newFeature=function(e){const t=e.geometry.type;return t===d.POINT?new B(this._ctx,e):t===d.LINE_STRING?new J(this._ctx,e):t===d.POLYGON?new j(this._ctx,e):new X(this._ctx,e)},Z.prototype.isInstanceOf=function(e,t){if(e===d.POINT)return t instanceof B;if(e===d.LINE_STRING)return t instanceof J;if(e===d.POLYGON)return t instanceof j;if("MultiFeature"===e)return t instanceof X;throw new Error(`Unknown feature class: ${e}`)},Z.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)},Z.prototype.onSetup=function(){},Z.prototype.onDrag=function(){},Z.prototype.onClick=function(){},Z.prototype.onMouseMove=function(){},Z.prototype.onMouseDown=function(){},Z.prototype.onMouseUp=function(){},Z.prototype.onMouseOut=function(){},Z.prototype.onKeyUp=function(){},Z.prototype.onKeyDown=function(){},Z.prototype.onTouchStart=function(){},Z.prototype.onTouchMove=function(){},Z.prototype.onTouchEnd=function(){},Z.prototype.onTap=function(){},Z.prototype.onStop=function(){},Z.prototype.onTrash=function(){},Z.prototype.onCombineFeature=function(){},Z.prototype.onUncombineFeature=function(){},Z.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};const q={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},W=Object.keys(q);function H(e){const t=Object.keys(e);return function(o,n={}){let r={};const i=t.reduce(((t,o)=>(t[o]=e[o],t)),new Z(o));return{start(){r=i.onSetup(n),W.forEach((t=>{const o=q[t];let n=()=>!1;var s;e[o]&&(n=()=>!0),this.on(t,n,(s=o,e=>i[s](r,e)))}))},stop(){i.onStop(r)},trash(){i.onTrash(r)},combineFeatures(){i.onCombineFeatures(r)},uncombineFeatures(){i.onUncombineFeatures(r)},render(e,t){i.toDisplayFeatures(r,e,t)}}}}function K(e){return[].concat(e).filter((e=>void 0!==e))}function z(){const e=this,{ctx:t}=e,{map:o,events:n}=t,r=c,i=()=>{e.isDirty=!1,e.clearChangedIds()};if(!(o&&void 0!==o.getSource(r)))return i();const s=n.currentModeName(),a=e.getAllIds(),u=e.source.length,l=[];for(const t of a){const o=e.get(t).internal(s);n.currentModeRender(o,(e=>{e.properties.mode=s,l.push(e)}))}e.source=l;if(u!==a.length||a.length>0){o.getSource(r).setData({type:d.FEATURE_COLLECTION,features:l})}i()}function Q(e){let t;this._features={},this._featureIds=new O,this._selectedFeatureIds=new O,this._selectedCoordinates=[],this._changedFeatureIds=new O,this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=e,this.source=[],this.render=()=>{t||(t=requestAnimationFrame((()=>{t=null,z.call(this),this._emitSelectionChange&&(this.ctx.events.fire(h.SELECTION_CHANGE,{features:this.getSelected().map((e=>e.toGeoJSON())),points:this.getSelectedCoordinates().map((e=>({type:d.FEATURE,properties:{},geometry:{type:d.POINT,coordinates:e.coordinates}})))}),this._emitSelectionChange=!1),this.ctx.events.fire(h.RENDER,{})})))},this.isDirty=!1}function ee(e,t={}){const o=e._selectedCoordinates.filter((t=>e._selectedFeatureIds.has(t.feature_id)));e._selectedCoordinates.length===o.length||t.silent||(e._emitSelectionChange=!0),e._selectedCoordinates=o}Q.prototype.createRenderBatch=function(){const e=this.render;let t=0;return this.render=function(){t++},()=>{this.render=e,t>0&&this.render()}},Q.prototype.setDirty=function(){return this.isDirty=!0,this},Q.prototype.featureCreated=function(e,t={}){this._changedFeatureIds.add(e);if(!0!==(null!=t.silent?t.silent:this.ctx.options.suppressAPIEvents)){const t=this.get(e);this.ctx.events.fire(h.CREATE,{features:[t.toGeoJSON()]})}return this},Q.prototype.featureChanged=function(e,t={}){this._changedFeatureIds.add(e);return!0!==(null!=t.silent?t.silent:this.ctx.options.suppressAPIEvents)&&this.ctx.events.fire(h.UPDATE,{action:t.action?t.action:f.CHANGE_COORDINATES,features:[this.get(e).toGeoJSON()]}),this},Q.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Q.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Q.prototype.getAllIds=function(){return this._featureIds.values()},Q.prototype.add=function(e,t={}){return this._features[e.id]=e,this._featureIds.add(e.id),this.featureCreated(e.id,{silent:t.silent}),this},Q.prototype.delete=function(e,t={}){const o=[];return K(e).forEach((e=>{this._featureIds.has(e)&&(this._featureIds.delete(e),this._selectedFeatureIds.delete(e),t.silent||-1===o.indexOf(this._features[e])&&o.push(this._features[e].toGeoJSON()),delete this._features[e],this.isDirty=!0)})),o.length&&this.ctx.events.fire(h.DELETE,{features:o}),ee(this,t),this},Q.prototype.get=function(e){return this._features[e]},Q.prototype.getAll=function(){return Object.keys(this._features).map((e=>this._features[e]))},Q.prototype.select=function(e,t={}){return K(e).forEach((e=>{this._selectedFeatureIds.has(e)||(this._selectedFeatureIds.add(e),this._changedFeatureIds.add(e),t.silent||(this._emitSelectionChange=!0))})),this},Q.prototype.deselect=function(e,t={}){return K(e).forEach((e=>{this._selectedFeatureIds.has(e)&&(this._selectedFeatureIds.delete(e),this._changedFeatureIds.add(e),t.silent||(this._emitSelectionChange=!0))})),ee(this,t),this},Q.prototype.clearSelected=function(e={}){return this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this},Q.prototype.setSelected=function(e,t={}){return e=K(e),this.deselect(this._selectedFeatureIds.values().filter((t=>-1===e.indexOf(t))),{silent:t.silent}),this.select(e.filter((e=>!this._selectedFeatureIds.has(e))),{silent:t.silent}),this},Q.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this},Q.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Q.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Q.prototype.getSelected=function(){return this.getSelectedIds().map((e=>this.get(e)))},Q.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map((e=>({coordinates:this.get(e.feature_id).getCoordinate(e.coord_path)})))},Q.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)},Q.prototype.setFeatureProperty=function(e,t,o,n={}){this.get(e).setProperty(t,o),this.featureChanged(e,{silent:n.silent,action:f.CHANGE_PROPERTIES})},Q.prototype.storeMapConfig=function(){y.forEach((e=>{this.ctx.map[e]&&(this._mapInitialConfig[e]=this.ctx.map[e].isEnabled())}))},Q.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach((e=>{this._mapInitialConfig[e]?this.ctx.map[e].enable():this.ctx.map[e].disable()}))},Q.prototype.getInitialConfigValue=function(e){return void 0===this._mapInitialConfig[e]||this._mapInitialConfig[e]};const te=["mode","feature","mouse"];function oe(t){let o=null,n=null;const r={onRemove(){return t.map.off("load",r.connect),clearInterval(n),r.removeLayers(),t.store.restoreMapConfig(),t.ui.removeButtons(),t.events.removeEventListeners(),t.ui.clearMapClasses(),t.boxZoomInitial&&t.map.boxZoom.enable(),t.map=null,t.container=null,t.store=null,o&&o.parentNode&&o.parentNode.removeChild(o),o=null,this},connect(){t.map.off("load",r.connect),clearInterval(n),r.addLayers(),t.store.storeMapConfig(),t.events.addEventListeners()},onAdd(i){if(t.map=i,t.events=function(t){const o=Object.keys(t.options.modes).reduce(((e,o)=>(e[o]=H(t.options.modes[o]),e)),{});let n={},r={};const i={};let s=null,c=null;i.drag=function(e,o){o({point:e.point,time:(new Date).getTime()})?(t.ui.queueMapClasses({mouse:u.DRAG}),c.drag(e)):e.originalEvent.stopPropagation()},i.mousedrag=function(e){i.drag(e,(e=>!w(n,e)))},i.touchdrag=function(e){i.drag(e,(e=>!U(r,e)))},i.mousemove=function(e){if(1===(void 0!==e.originalEvent.buttons?e.originalEvent.buttons:e.originalEvent.which))return i.mousedrag(e);const o=b(e,t);e.featureTarget=o,c.mousemove(e)},i.mousedown=function(e){n={time:(new Date).getTime(),point:e.point};const o=b(e,t);e.featureTarget=o,c.mousedown(e)},i.mouseup=function(e){const o=b(e,t);e.featureTarget=o,w(n,{point:e.point,time:(new Date).getTime()})?c.click(e):c.mouseup(e)},i.mouseout=function(e){c.mouseout(e)},i.touchstart=function(e){if(!t.options.touchEnabled)return;r={time:(new Date).getTime(),point:e.point};const o=N.touch(e,null,t)[0];e.featureTarget=o,c.touchstart(e)},i.touchmove=function(e){if(t.options.touchEnabled)return c.touchmove(e),i.touchdrag(e)},i.touchend=function(e){if(e.originalEvent.preventDefault(),!t.options.touchEnabled)return;const o=N.touch(e,null,t)[0];e.featureTarget=o,U(r,{time:(new Date).getTime(),point:e.point})?c.tap(e):c.touchend(e)};const l=e=>!(8===e||46===e||e>=48&&e<=57);function d(n,r,i={}){c.stop();const a=o[n];if(void 0===a)throw new Error(`${n} is not valid`);s=n;const u=a(t,r);c=e(u,t),i.silent||t.map.fire(h.MODE_CHANGE,{mode:n}),t.store.setDirty(),t.store.render()}i.keydown=function(e){(e.srcElement||e.target).classList.contains(a.CANVAS)&&(8!==e.keyCode&&46!==e.keyCode||!t.options.controls.trash?l(e.keyCode)?c.keydown(e):49===e.keyCode&&t.options.controls.point?d(p.DRAW_POINT):50===e.keyCode&&t.options.controls.line_string?d(p.DRAW_LINE_STRING):51===e.keyCode&&t.options.controls.polygon&&d(p.DRAW_POLYGON):(e.preventDefault(),c.trash()))},i.keyup=function(e){l(e.keyCode)&&c.keyup(e)},i.zoomend=function(){t.store.changeZoom()},i.data=function(e){if("style"===e.dataType){const{setup:e,map:o,options:n,store:r}=t;n.styles.some((e=>o.getLayer(e.id)))||(e.addLayers(),r.setDirty(),r.render())}};const f={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start(){s=t.options.defaultMode,c=e(o[s](t),t)},changeMode:d,actionable:function(e){let o=!1;Object.keys(e).forEach((t=>{if(void 0===f[t])throw new Error("Invalid action type");f[t]!==e[t]&&(o=!0),f[t]=e[t]})),o&&t.map.fire(h.ACTIONABLE,{actions:f})},currentModeName:()=>s,currentModeRender:(e,t)=>c.render(e,t),fire(e,o){t.map&&t.map.fire(e,o)},addEventListeners(){t.map.on("mousemove",i.mousemove),t.map.on("mousedown",i.mousedown),t.map.on("mouseup",i.mouseup),t.map.on("data",i.data),t.map.on("touchmove",i.touchmove),t.map.on("touchstart",i.touchstart),t.map.on("touchend",i.touchend),t.container.addEventListener("mouseout",i.mouseout),t.options.keybindings&&(t.container.addEventListener("keydown",i.keydown),t.container.addEventListener("keyup",i.keyup))},removeEventListeners(){t.map.off("mousemove",i.mousemove),t.map.off("mousedown",i.mousedown),t.map.off("mouseup",i.mouseup),t.map.off("data",i.data),t.map.off("touchmove",i.touchmove),t.map.off("touchstart",i.touchstart),t.map.off("touchend",i.touchend),t.container.removeEventListener("mouseout",i.mouseout),t.options.keybindings&&(t.container.removeEventListener("keydown",i.keydown),t.container.removeEventListener("keyup",i.keyup))},trash(e){c.trash(e)},combineFeatures(){c.combineFeatures()},uncombineFeatures(){c.uncombineFeatures()},getMode:()=>s}}(t),t.ui=function(e){const t={};let o=null,n={mode:null,feature:null,mouse:null},r={mode:null,feature:null,mouse:null};function i(e){r=Object.assign(r,e)}function s(){if(!e.container)return;const t=[],o=[];te.forEach((e=>{r[e]!==n[e]&&(t.push(`${e}-${n[e]}`),null!==r[e]&&o.push(`${e}-${r[e]}`))})),t.length>0&&e.container.classList.remove(...t),o.length>0&&e.container.classList.add(...o),n=Object.assign(n,r)}function c(e,t={}){const n=document.createElement("button");return n.className=`${a.CONTROL_BUTTON} ${t.className}`,n.setAttribute("title",t.title),t.container.appendChild(n),n.addEventListener("click",(n=>{if(n.preventDefault(),n.stopPropagation(),n.target===o)return u(),void t.onDeactivate();d(e),t.onActivate()}),!0),n}function u(){o&&(o.classList.remove(a.ACTIVE_BUTTON),o=null)}function d(e){u();const n=t[e];n&&n&&"trash"!==e&&(n.classList.add(a.ACTIVE_BUTTON),o=n)}return{setActiveButton:d,queueMapClasses:i,updateMapClasses:s,clearMapClasses:function(){i({mode:null,feature:null,mouse:null}),s()},addButtons:function(){const o=e.options.controls,n=document.createElement("div");return n.className=`${a.CONTROL_GROUP} ${a.CONTROL_BASE}`,o?(o[l.POINT]&&(t[l.POINT]=c(l.POINT,{container:n,className:a.CONTROL_BUTTON_POINT,title:"Marker tool "+(e.options.keybindings?"(1)":""),onActivate:()=>e.events.changeMode(p.DRAW_POINT),onDeactivate:()=>e.events.trash()})),o[l.LINE]&&(t[l.LINE]=c(l.LINE,{container:n,className:a.CONTROL_BUTTON_LINE,title:"LineString tool "+(e.options.keybindings?"(2)":""),onActivate:()=>e.events.changeMode(p.DRAW_LINE_STRING),onDeactivate:()=>e.events.trash()})),o[l.POLYGON]&&(t[l.POLYGON]=c(l.POLYGON,{container:n,className:a.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(e.options.keybindings?"(3)":""),onActivate:()=>e.events.changeMode(p.DRAW_POLYGON),onDeactivate:()=>e.events.trash()})),o.trash&&(t.trash=c("trash",{container:n,className:a.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{e.events.trash()}})),o.combine_features&&(t.combine_features=c("combineFeatures",{container:n,className:a.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{e.events.combineFeatures()}})),o.uncombine_features&&(t.uncombine_features=c("uncombineFeatures",{container:n,className:a.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{e.events.uncombineFeatures()}})),n):n},removeButtons:function(){Object.keys(t).forEach((e=>{const o=t[e];o.parentNode&&o.parentNode.removeChild(o),delete t[e]}))}}}(t),t.container=i.getContainer(),t.store=new Q(t),o=t.ui.addButtons(),t.options.boxSelect){t.boxZoomInitial=i.boxZoom.isEnabled(),i.boxZoom.disable();const e=i.dragPan.isEnabled();i.dragPan.disable(),i.dragPan.enable(),e||i.dragPan.disable()}return i.loaded()?r.connect():(i.on("load",r.connect),n=setInterval((()=>{i.loaded()&&r.connect()}),16)),t.events.start(),o},addLayers(){t.map.addSource(c,{data:{type:d.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.options.styles.forEach((e=>{t.map.addLayer(e)})),t.store.setDirty(!0),t.store.render()},removeLayers(){t.options.styles.forEach((e=>{t.map.getLayer(e.id)&&t.map.removeLayer(e.id)})),t.map.getSource(c)&&t.map.removeSource(c)}};return t.setup=r,r}const ne="#3bb2d0",re="#fbb03b",ie="#fff";var se=[{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"]],paint:{"fill-color":["case",["==",["get","active"],"true"],re,ne],"fill-opacity":.1}},{id:"gl-draw-lines",type:"line",filter:["any",["==","$type","LineString"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["==",["get","active"],"true"],re,ne],"line-dasharray":["case",["==",["get","active"],"true"],[.2,2],[2,0]],"line-width":2}},{id:"gl-draw-point-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":ie}},{id:"gl-draw-point-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":["case",["==",["get","active"],"true"],re,ne]}},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":ie}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":re}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":re}}];function ae(e){return function(t){const o=t.featureTarget;return!!o&&(!!o.properties&&o.properties.meta===e)}}function ce(e){return!!e.originalEvent&&(!!e.originalEvent.shiftKey&&0===e.originalEvent.button)}function ue(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&(e.featureTarget.properties.active===m.ACTIVE&&e.featureTarget.properties.meta===g.FEATURE))}function le(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&(e.featureTarget.properties.active===m.INACTIVE&&e.featureTarget.properties.meta===g.FEATURE))}function de(e){return void 0===e.featureTarget}function pe(e){return!!e.featureTarget&&(!!e.featureTarget.properties&&e.featureTarget.properties.meta===g.FEATURE)}function he(e){const t=e.featureTarget;return!!t&&(!!t.properties&&t.properties.meta===g.VERTEX)}function fe(e){return!!e.originalEvent&&!0===e.originalEvent.shiftKey}function ge(e){return 27===e.keyCode}function me(e){return 13===e.keyCode}var ye=Object.freeze({__proto__:null,isActiveFeature:ue,isEnterKey:me,isEscapeKey:ge,isFeature:pe,isInactiveFeature:le,isOfMetaType:ae,isShiftDown:fe,isShiftMousedown:ce,isTrue:function(){return!0},isVertex:he,noTarget:de});function Ee(e,t){this.x=e,this.y=t}function Te(e,t){const o=t.getBoundingClientRect();return new Ee(e.clientX-o.left-(t.clientLeft||0),e.clientY-o.top-(t.clientTop||0))}function Ce(e,t,o,n){return{type:d.FEATURE,properties:{meta:g.VERTEX,parent:e,coord_path:o,active:n?m.ACTIVE:m.INACTIVE},geometry:{type:d.POINT,coordinates:t}}}function _e(e,t,o){const n=t.geometry.coordinates,r=o.geometry.coordinates;if(n[1]>T||n[1]<E||r[1]>T||r[1]<E)return null;const i={lng:(n[0]+r[0])/2,lat:(n[1]+r[1])/2};return{type:d.FEATURE,properties:{meta:g.MIDPOINT,parent:e,lng:i.lng,lat:i.lat,coord_path:o.properties.coord_path},geometry:{type:d.POINT,coordinates:[i.lng,i.lat]}}}function ve(e,t={},o=null){const{type:n,coordinates:r}=e.geometry,i=e.properties&&e.properties.id;let s=[];function a(e,o){let n="",r=null;e.forEach(((e,a)=>{const u=null!=o?`${o}.${a}`:String(a),l=Ce(i,e,u,c(u));if(t.midpoints&&r){const e=_e(i,r,l);e&&s.push(e)}r=l;const d=JSON.stringify(e);n!==d&&s.push(l),0===a&&(n=d)}))}function c(e){return!!t.selectedPaths&&-1!==t.selectedPaths.indexOf(e)}return n===d.POINT?s.push(Ce(i,r,o,c(o))):n===d.POLYGON?r.forEach(((e,t)=>{a(e,null!==o?`${o}.${t}`:String(t))})):n===d.LINE_STRING?a(r,o):0===n.indexOf(d.MULTI_PREFIX)&&function(){const o=n.replace(d.MULTI_PREFIX,"");r.forEach(((n,r)=>{const i={type:d.FEATURE,properties:e.properties,geometry:{type:o,coordinates:n}};s=s.concat(ve(i,t,r))}))}(),s}Ee.prototype={clone(){return new Ee(this.x,this.y)},add(e){return this.clone()._add(e)},sub(e){return this.clone()._sub(e)},multByPoint(e){return this.clone()._multByPoint(e)},divByPoint(e){return this.clone()._divByPoint(e)},mult(e){return this.clone()._mult(e)},div(e){return this.clone()._div(e)},rotate(e){return this.clone()._rotate(e)},rotateAround(e,t){return this.clone()._rotateAround(e,t)},matMult(e){return this.clone()._matMult(e)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(e){return this.x===e.x&&this.y===e.y},dist(e){return Math.sqrt(this.distSqr(e))},distSqr(e){const t=e.x-this.x,o=e.y-this.y;return t*t+o*o},angle(){return Math.atan2(this.y,this.x)},angleTo(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith(e){return this.angleWithSep(e.x,e.y)},angleWithSep(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult(e){const t=e[0]*this.x+e[1]*this.y,o=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=o,this},_add(e){return this.x+=e.x,this.y+=e.y,this},_sub(e){return this.x-=e.x,this.y-=e.y,this},_mult(e){return this.x*=e,this.y*=e,this},_div(e){return this.x/=e,this.y/=e,this},_multByPoint(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint(e){return this.x/=e.x,this.y/=e.y,this},_unit(){return this._div(this.mag()),this},_perp(){const e=this.y;return this.y=this.x,this.x=-e,this},_rotate(e){const t=Math.cos(e),o=Math.sin(e),n=t*this.x-o*this.y,r=o*this.x+t*this.y;return this.x=n,this.y=r,this},_rotateAround(e,t){const o=Math.cos(e),n=Math.sin(e),r=t.x+o*(this.x-t.x)-n*(this.y-t.y),i=t.y+n*(this.x-t.x)+o*(this.y-t.y);return this.x=r,this.y=i,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:Ee},Ee.convert=function(e){if(e instanceof Ee)return e;if(Array.isArray(e))return new Ee(+e[0],+e[1]);if(void 0!==e.x&&void 0!==e.y)return new Ee(+e.x,+e.y);throw new Error("Expected [x, y] or {x, y} point format")};var Ie={enable(e){setTimeout((()=>{e.map&&e.map.doubleClickZoom&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()}),0)},disable(e){setTimeout((()=>{e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()}),0)}};const{LAT_MIN:Se,LAT_MAX:Oe,LAT_RENDERED_MIN:Me,LAT_RENDERED_MAX:Ne,LNG_MIN:Le,LNG_MAX:be}=C;function Pe(e,t){let o=Se,n=Oe,r=Se,i=Oe,s=be,a=Le;e.forEach((e=>{const t=function(e){const t={Point:0,LineString:1,Polygon:2,MultiPoint:1,MultiLineString:2,MultiPolygon:3}[e.geometry.type],o=[e.geometry.coordinates].flat(t),n=o.map((e=>e[0])),r=o.map((e=>e[1])),i=e=>Math.min.apply(null,e),s=e=>Math.max.apply(null,e);return[i(n),i(r),s(n),s(r)]}(e),c=t[1],u=t[3],l=t[0],d=t[2];c>o&&(o=c),u<n&&(n=u),u>r&&(r=u),c<i&&(i=c),l<s&&(s=l),d>a&&(a=d)}));const c=t;return o+c.lat>Ne&&(c.lat=Ne-o),r+c.lat>Oe&&(c.lat=Oe-r),n+c.lat<Me&&(c.lat=Me-n),i+c.lat<Se&&(c.lat=Se-i),s+c.lng<=Le&&(c.lng+=360*Math.ceil(Math.abs(c.lng)/360)),a+c.lng>=be&&(c.lng-=360*Math.ceil(Math.abs(c.lng)/360)),c}function xe(e,t){const o=Pe(e.map((e=>e.toGeoJSON())),t);e.forEach((e=>{const t=e.getCoordinates(),n=e=>{const t={lng:e[0]+o.lng,lat:e[1]+o.lat};return[t.lng,t.lat]},r=e=>e.map((e=>n(e))),i=e=>e.map((e=>r(e)));let s;e.type===d.POINT?s=n(t):e.type===d.LINE_STRING||e.type===d.MULTI_POINT?s=t.map(n):e.type===d.POLYGON||e.type===d.MULTI_LINE_STRING?s=t.map(r):e.type===d.MULTI_POLYGON&&(s=t.map(i)),e.incomingCoords(s)}))}const Ae={onSetup:function(e){const t={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initialDragPanState:this.map.dragPan.isEnabled(),initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(t.initiallySelectedFeatureIds.filter((e=>void 0!==this.getFeature(e)))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),t},fireUpdate:function(){this.fire(h.UPDATE,{action:f.MOVE,features:this.getSelected().map((e=>e.toGeoJSON()))})},fireActionable:function(){const e=this.getSelected(),t=e.filter((e=>this.isInstanceOf("MultiFeature",e)));let o=!1;if(e.length>1){o=!0;const t=e[0].type.replace("Multi","");e.forEach((e=>{e.type.replace("Multi","")!==t&&(o=!1)}))}const n=t.length>0,r=e.length>0;this.setActionableState({combineFeatures:o,uncombineFeatures:n,trash:r})},getUniqueIds:function(e){if(!e.length)return[];return e.map((e=>e.properties.id)).filter((e=>void 0!==e)).reduce(((e,t)=>(e.add(t),e)),new O).values()},stopExtendedInteractions:function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),(e.canDragMove||e.canBoxSelect)&&!0===e.initialDragPanState&&this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1},onStop:function(){Ie.enable(this)},onMouseMove:function(e,t){return pe(t)&&e.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(e),!0},onMouseOut:function(e){return!e.dragMoving||this.fireUpdate()}};Ae.onTap=Ae.onClick=function(e,t){return de(t)?this.clickAnywhere(e,t):ae(g.VERTEX)(t)?this.clickOnVertex(e,t):pe(t)?this.clickOnFeature(e,t):void 0},Ae.clickAnywhere=function(e){const t=this.getSelectedIds();t.length&&(this.clearSelectedFeatures(),t.forEach((e=>this.doRender(e)))),Ie.enable(this),this.stopExtendedInteractions(e)},Ae.clickOnVertex=function(e,t){this.changeMode(p.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:u.MOVE})},Ae.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},Ae.clickOnFeature=function(e,t){Ie.disable(this),this.stopExtendedInteractions(e);const o=fe(t),n=this.getSelectedIds(),r=t.featureTarget.properties.id,i=this.isSelected(r);if(!o&&i&&this.getFeature(r).type!==d.POINT)return this.changeMode(p.DIRECT_SELECT,{featureId:r});i&&o?(this.deselect(r),this.updateUIClasses({mouse:u.POINTER}),1===n.length&&Ie.enable(this)):!i&&o?(this.select(r),this.updateUIClasses({mouse:u.MOVE})):i||o||(n.forEach((e=>this.doRender(e))),this.setSelected(r),this.updateUIClasses({mouse:u.MOVE})),this.doRender(r)},Ae.onMouseDown=function(e,t){return e.initialDragPanState=this.map.dragPan.isEnabled(),ue(t)?this.startOnActiveFeature(e,t):this.drawConfig.boxSelect&&ce(t)?this.startBoxSelect(e,t):void 0},Ae.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=Te(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0},Ae.onTouchStart=function(e,t){if(ue(t))return this.startOnActiveFeature(e,t)},Ae.onDrag=function(e,t){return e.canDragMove?this.dragMove(e,t):this.drawConfig.boxSelect&&e.canBoxSelect?this.whileBoxSelect(e,t):void 0},Ae.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:u.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(a.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));const o=Te(t.originalEvent,this.map.getContainer()),n=Math.min(e.boxSelectStartLocation.x,o.x),r=Math.max(e.boxSelectStartLocation.x,o.x),i=Math.min(e.boxSelectStartLocation.y,o.y),s=Math.max(e.boxSelectStartLocation.y,o.y),c=`translate(${n}px, ${i}px)`;e.boxSelectElement.style.transform=c,e.boxSelectElement.style.WebkitTransform=c,e.boxSelectElement.style.width=r-n+"px",e.boxSelectElement.style.height=s-i+"px"},Ae.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();const o={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};xe(this.getSelected(),o),e.dragMoveLocation=t.lngLat},Ae.onTouchEnd=Ae.onMouseUp=function(e,t){if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){const o=[e.boxSelectStartLocation,Te(t.originalEvent,this.map.getContainer())],n=this.featuresAt(null,o,"click"),r=this.getUniqueIds(n).filter((e=>!this.isSelected(e)));r.length&&(this.select(r),r.forEach((e=>this.doRender(e))),this.updateUIClasses({mouse:u.MOVE}))}this.stopExtendedInteractions(e)},Ae.toDisplayFeatures=function(e,t,o){t.properties.active=this.isSelected(t.properties.id)?m.ACTIVE:m.INACTIVE,o(t),this.fireActionable(),t.properties.active===m.ACTIVE&&t.geometry.type!==d.POINT&&ve(t).forEach(o)},Ae.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Ae.onCombineFeatures=function(){const e=this.getSelected();if(0===e.length||e.length<2)return;const t=[],o=[],n=e[0].type.replace("Multi","");for(let r=0;r<e.length;r++){const i=e[r];if(i.type.replace("Multi","")!==n)return;i.type.includes("Multi")?i.getCoordinates().forEach((e=>{t.push(e)})):t.push(i.getCoordinates()),o.push(i.toGeoJSON())}if(o.length>1){const e=this.newFeature({type:d.FEATURE,properties:o[0].properties,geometry:{type:`Multi${n}`,coordinates:t}});this.addFeature(e),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([e.id]),this.fire(h.COMBINE_FEATURES,{createdFeatures:[e.toGeoJSON()],deletedFeatures:o})}this.fireActionable()},Ae.onUncombineFeatures=function(){const e=this.getSelected();if(0===e.length)return;const t=[],o=[];for(let n=0;n<e.length;n++){const r=e[n];this.isInstanceOf("MultiFeature",r)&&(r.getFeatures().forEach((e=>{this.addFeature(e),e.properties=r.properties,t.push(e.toGeoJSON()),this.select([e.id])})),this.deleteFeature(r.id,{silent:!0}),o.push(r.toGeoJSON()))}t.length>1&&this.fire(h.UNCOMBINE_FEATURES,{createdFeatures:t,deletedFeatures:o}),this.fireActionable()};const Fe=ae(g.VERTEX),we=ae(g.MIDPOINT),Re={fireUpdate:function(){this.fire(h.UPDATE,{action:f.CHANGE_COORDINATES,features:this.getSelected().map((e=>e.toGeoJSON()))})},fireActionable:function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})},startDragging:function(e,t){null==e.initialDragPanState&&(e.initialDragPanState=this.map.dragPan.isEnabled()),this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},stopDragging:function(e){e.canDragMove&&!0===e.initialDragPanState&&this.map.dragPan.enable(),e.initialDragPanState=null,e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null},onVertex:function(e,t){this.startDragging(e,t);const o=t.featureTarget.properties,n=e.selectedCoordPaths.indexOf(o.coord_path);fe(t)||-1!==n?fe(t)&&-1===n&&e.selectedCoordPaths.push(o.coord_path):e.selectedCoordPaths=[o.coord_path];const r=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(r)},onMidpoint:function(e,t){this.startDragging(e,t);const o=t.featureTarget.properties;e.feature.addCoordinate(o.coord_path,o.lng,o.lat),this.fireUpdate(),e.selectedCoordPaths=[o.coord_path]},pathsToCoordinates:function(e,t){return t.map((t=>({feature_id:e,coord_path:t})))},onFeature:function(e,t){0===e.selectedCoordPaths.length?this.startDragging(e,t):this.stopDragging(e)},dragFeature:function(e,t,o){xe(this.getSelected(),o),e.dragMoveLocation=t.lngLat},dragVertex:function(e,t,o){const n=e.selectedCoordPaths.map((t=>e.feature.getCoordinate(t))),r=Pe(n.map((e=>({type:d.FEATURE,properties:{},geometry:{type:d.POINT,coordinates:e}}))),o);for(let t=0;t<n.length;t++){const o=n[t];e.feature.updateCoordinate(e.selectedCoordPaths[t],o[0]+r.lng,o[1]+r.lat)}},clickNoTarget:function(){this.changeMode(p.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(p.SIMPLE_SELECT)},clickActiveFeature:function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()},onSetup:function(e){const t=e.featureId,o=this.getFeature(t);if(!o)throw new Error("You must provide a featureId to enter direct_select mode");if(o.type===d.POINT)throw new TypeError("direct_select mode doesn't handle point features");const n={featureId:t,feature:o,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,n.selectedCoordPaths)),this.setSelected(t),Ie.disable(this),this.setActionableState({trash:!0}),n},onStop:function(){Ie.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(e,t,o){e.featureId===t.properties.id?(t.properties.active=m.ACTIVE,o(t),ve(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(o)):(t.properties.active=m.INACTIVE,o(t)),this.fireActionable(e)},onTrash:function(e){e.selectedCoordPaths.sort(((e,t)=>t.localeCompare(e,"en",{numeric:!0}))).forEach((t=>e.feature.removeCoordinate(t))),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),!1===e.feature.isValid()&&(this.deleteFeature([e.featureId]),this.changeMode(p.SIMPLE_SELECT,{}))},onMouseMove:function(e,t){const o=ue(t),n=Fe(t),r=we(t),i=0===e.selectedCoordPaths.length;o&&i||n&&!i?this.updateUIClasses({mouse:u.MOVE}):this.updateUIClasses({mouse:u.NONE});return(n||o||r)&&e.dragMoving&&this.fireUpdate(),this.stopDragging(e),!0},onMouseOut:function(e){return e.dragMoving&&this.fireUpdate(),!0}};Re.onTouchStart=Re.onMouseDown=function(e,t){return Fe(t)?this.onVertex(e,t):ue(t)?this.onFeature(e,t):we(t)?this.onMidpoint(e,t):void 0},Re.onDrag=function(e,t){if(!0!==e.canDragMove)return;e.dragMoving=!0,t.originalEvent.stopPropagation();const o={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,o):this.dragFeature(e,t,o),e.dragMoveLocation=t.lngLat},Re.onClick=function(e,t){return de(t)?this.clickNoTarget(e,t):ue(t)?this.clickActiveFeature(e,t):le(t)?this.clickInactive(e,t):void this.stopDragging(e)},Re.onTap=function(e,t){return de(t)?this.clickNoTarget(e,t):ue(t)?this.clickActiveFeature(e,t):le(t)?this.clickInactive(e,t):void 0},Re.onTouchEnd=Re.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};const De={};function Ue(e,t){return!!e.lngLat&&(e.lngLat.lng===t[0]&&e.lngLat.lat===t[1])}De.onSetup=function(){const e=this.newFeature({type:d.FEATURE,properties:{},geometry:{type:d.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:u.ADD}),this.activateUIButton(l.POINT),this.setActionableState({trash:!0}),{point:e}},De.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(p.SIMPLE_SELECT)},De.onTap=De.onClick=function(e,t){this.updateUIClasses({mouse:u.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.fire(h.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(p.SIMPLE_SELECT,{featureIds:[e.point.id]})},De.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})},De.toDisplayFeatures=function(e,t,o){const n=t.properties.id===e.point.id;if(t.properties.active=n?m.ACTIVE:m.INACTIVE,!n)return o(t)},De.onTrash=De.stopDrawingAndRemove,De.onKeyUp=function(e,t){if(ge(t)||me(t))return this.stopDrawingAndRemove(e,t)};const ke={onSetup:function(){const e=this.newFeature({type:d.FEATURE,properties:{},geometry:{type:d.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),Ie.disable(this),this.updateUIClasses({mouse:u.ADD}),this.activateUIButton(l.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&Ue(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(p.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:u.ADD}),e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(p.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},onMouseMove:function(e,t){e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),he(t)&&this.updateUIClasses({mouse:u.POINTER})}};ke.onTap=ke.onClick=function(e,t){return he(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)},ke.onKeyUp=function(e,t){ge(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(p.SIMPLE_SELECT)):me(t)&&this.changeMode(p.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},ke.onStop=function(e){this.updateUIClasses({mouse:u.NONE}),Ie.enable(this),this.activateUIButton(),void 0!==this.getFeature(e.polygon.id)&&(e.polygon.removeCoordinate(`0.${e.currentVertexPosition}`),e.polygon.isValid()?this.fire(h.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(p.SIMPLE_SELECT,{},{silent:!0})))},ke.toDisplayFeatures=function(e,t,o){const n=t.properties.id===e.polygon.id;if(t.properties.active=n?m.ACTIVE:m.INACTIVE,!n)return o(t);if(0===t.geometry.coordinates.length)return;const r=t.geometry.coordinates[0].length;if(!(r<3)){if(t.properties.meta=g.FEATURE,o(Ce(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),r>3){const n=t.geometry.coordinates[0].length-3;o(Ce(e.polygon.id,t.geometry.coordinates[0][n],`0.${n}`,!1))}if(r<=4){const e=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(o({type:d.FEATURE,properties:t.properties,geometry:{coordinates:e,type:d.LINE_STRING}}),3===r)return}return o(t)}},ke.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(p.SIMPLE_SELECT)};const Ve={onSetup:function(e){const t=(e=e||{}).featureId;let o,n,r="forward";if(t){if(o=this.getFeature(t),!o)throw new Error("Could not find a feature with the provided featureId");let i=e.from;if(i&&"Feature"===i.type&&i.geometry&&"Point"===i.geometry.type&&(i=i.geometry),i&&"Point"===i.type&&i.coordinates&&2===i.coordinates.length&&(i=i.coordinates),!i||!Array.isArray(i))throw new Error("Please use the `from` property to indicate which point to continue the line from");const s=o.coordinates.length-1;if(o.coordinates[s][0]===i[0]&&o.coordinates[s][1]===i[1])n=s+1,o.addCoordinate(n,...o.coordinates[s]);else{if(o.coordinates[0][0]!==i[0]||o.coordinates[0][1]!==i[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");r="backwards",n=0,o.addCoordinate(n,...o.coordinates[0])}}else o=this.newFeature({type:d.FEATURE,properties:{},geometry:{type:d.LINE_STRING,coordinates:[]}}),n=0,this.addFeature(o);return this.clearSelectedFeatures(),Ie.disable(this),this.updateUIClasses({mouse:u.ADD}),this.activateUIButton(l.LINE),this.setActionableState({trash:!0}),{line:o,currentVertexPosition:n,direction:r}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&Ue(t,e.line.coordinates[e.currentVertexPosition-1])||"backwards"===e.direction&&Ue(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(p.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:u.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),"forward"===e.direction?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(p.SIMPLE_SELECT,{featureIds:[e.line.id]})},onMouseMove:function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),he(t)&&this.updateUIClasses({mouse:u.POINTER})}};Ve.onTap=Ve.onClick=function(e,t){if(he(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)},Ve.onKeyUp=function(e,t){me(t)?this.changeMode(p.SIMPLE_SELECT,{featureIds:[e.line.id]}):ge(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(p.SIMPLE_SELECT))},Ve.onStop=function(e){Ie.enable(this),this.activateUIButton(),void 0!==this.getFeature(e.line.id)&&(e.line.removeCoordinate(`${e.currentVertexPosition}`),e.line.isValid()?this.fire(h.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(p.SIMPLE_SELECT,{},{silent:!0})))},Ve.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(p.SIMPLE_SELECT)},Ve.toDisplayFeatures=function(e,t,o){const n=t.properties.id===e.line.id;if(t.properties.active=n?m.ACTIVE:m.INACTIVE,!n)return o(t);t.geometry.coordinates.length<2||(t.properties.meta=g.FEATURE,o(Ce(e.line.id,t.geometry.coordinates["forward"===e.direction?t.geometry.coordinates.length-2:1],""+("forward"===e.direction?t.geometry.coordinates.length-2:1),!1)),o(t))};var Ge={simple_select:Ae,direct_select:Re,draw_point:De,draw_polygon:ke,draw_line_string:Ve};const Be={defaultMode:p.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:se,modes:Ge,controls:{},userProperties:!1,suppressAPIEvents:!0},Je={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},je={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function $e(e={}){let t=Object.assign({},e);return e.controls||(t.controls={}),!1===e.displayControlsDefault?t.controls=Object.assign({},je,e.controls):t.controls=Object.assign({},Je,e.controls),t=Object.assign({},Be,t),t.styles=function(e){return e.map((e=>e.source?e:Object.assign({},e,{id:e.id,source:c})))}(t.styles),t}function Ye(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Xe,Ze;var qe,We,He=Ye(Ze?Xe:(Ze=1,Xe=function e(t,o){if(t===o)return!0;if(t&&o&&"object"==typeof t&&"object"==typeof o){if(t.constructor!==o.constructor)return!1;var n,r,i;if(Array.isArray(t)){if((n=t.length)!=o.length)return!1;for(r=n;0!=r--;)if(!e(t[r],o[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===o.source&&t.flags===o.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===o.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===o.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(o).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(o,i[r]))return!1;for(r=n;0!=r--;){var s=i[r];if(!e(t[s],o[s]))return!1}return!0}return t!=t&&o!=o}));var Ke=function(){if(We)return qe;We=1,qe=function(t){if(!t||!t.type)return null;var o=e[t.type];if(!o)return null;if("geometry"===o)return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]};if("feature"===o)return{type:"FeatureCollection",features:[t]};if("featurecollection"===o)return t};var e={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};return qe}(),ze=Ye(Ke);function Qe(e,t){return e.length===t.length&&JSON.stringify(e.map((e=>e)).sort())===JSON.stringify(t.map((e=>e)).sort())}const et={Polygon:j,LineString:J,Point:B,MultiPolygon:X,MultiLineString:X,MultiPoint:X};var tt=Object.freeze({__proto__:null,CommonSelectors:ye,ModeHandler:e,StringSet:O,constrainFeatureMovement:Pe,createMidPoint:_e,createSupplementaryPoints:ve,createVertex:Ce,doubleClickZoom:Ie,euclideanDistance:P,featuresAt:N,getFeatureAtAndSetCursors:b,isClick:w,isEventAtCoordinates:Ue,isTap:U,mapEventToBoundingBox:S,moveFeatures:xe,sortFeatures:I,stringSetsAreEqual:Qe,theme:se,toDenseArray:K});const ot=function(e,t){const o={options:e=$e(e)};t=function(e,t){t.modes=p;const o=void 0===e.options.suppressAPIEvents||!!e.options.suppressAPIEvents;return t.getFeatureIdsAt=function(t){return N.click({point:t},null,e).map((e=>e.properties.id))},t.getSelectedIds=function(){return e.store.getSelectedIds()},t.getSelected=function(){return{type:d.FEATURE_COLLECTION,features:e.store.getSelectedIds().map((t=>e.store.get(t))).map((e=>e.toGeoJSON()))}},t.getSelectedPoints=function(){return{type:d.FEATURE_COLLECTION,features:e.store.getSelectedCoordinates().map((e=>({type:d.FEATURE,properties:{},geometry:{type:d.POINT,coordinates:e.coordinates}})))}},t.set=function(o){if(void 0===o.type||o.type!==d.FEATURE_COLLECTION||!Array.isArray(o.features))throw new Error("Invalid FeatureCollection");const n=e.store.createRenderBatch();let r=e.store.getAllIds().slice();const i=t.add(o),s=new O(i);return r=r.filter((e=>!s.has(e))),r.length&&t.delete(r),n(),i},t.add=function(t){const n=JSON.parse(JSON.stringify(ze(t))).features.map((t=>{if(t.id=t.id||V(),null===t.geometry)throw new Error("Invalid geometry: null");if(void 0===e.store.get(t.id)||e.store.get(t.id).type!==t.geometry.type){const n=et[t.geometry.type];if(void 0===n)throw new Error(`Invalid geometry type: ${t.geometry.type}.`);const r=new n(e,t);e.store.add(r,{silent:o})}else{const n=e.store.get(t.id),r=n.properties;n.properties=t.properties,He(r,t.properties)||e.store.featureChanged(n.id,{silent:o}),He(n.getCoordinates(),t.geometry.coordinates)||n.incomingCoords(t.geometry.coordinates)}return t.id}));return e.store.render(),n},t.get=function(t){const o=e.store.get(t);if(o)return o.toGeoJSON()},t.getAll=function(){return{type:d.FEATURE_COLLECTION,features:e.store.getAll().map((e=>e.toGeoJSON()))}},t.delete=function(n){return e.store.delete(n,{silent:o}),t.getMode()!==p.DIRECT_SELECT||e.store.getSelectedIds().length?e.store.render():e.events.changeMode(p.SIMPLE_SELECT,void 0,{silent:o}),t},t.deleteAll=function(){return e.store.delete(e.store.getAllIds(),{silent:o}),t.getMode()===p.DIRECT_SELECT?e.events.changeMode(p.SIMPLE_SELECT,void 0,{silent:o}):e.store.render(),t},t.changeMode=function(n,r={},i=!1){return i?(e.events.changeMode(n,r,{silent:o}),t):n===p.SIMPLE_SELECT&&t.getMode()===p.SIMPLE_SELECT?(Qe(r.featureIds||[],e.store.getSelectedIds())||(e.store.setSelected(r.featureIds,{silent:o}),e.store.render()),t):(n===p.DIRECT_SELECT&&t.getMode()===p.DIRECT_SELECT&&r.featureId===e.store.getSelectedIds()[0]||e.events.changeMode(n,r,{silent:o}),t)},t.getMode=function(){return e.events.getMode()},t.trash=function(){return e.events.trash({silent:o}),t},t.combineFeatures=function(){return e.events.combineFeatures({silent:o}),t},t.uncombineFeatures=function(){return e.events.uncombineFeatures({silent:o}),t},t.setFeatureProperty=function(n,r,i){return e.store.setFeatureProperty(n,r,i,{silent:o}),t},t.reRender=function(){return e.store.setDirty(),e.store.render(),t},t}(o,t),o.api=t;const n=oe(o);return t.onAdd=n.onAdd,t.onRemove=n.onRemove,t.types=l,t.options=e,t};function nt(e){ot(e,this)}nt.modes=Ge,nt.constants=C,nt.lib=tt;export{nt as default};
//# sourceMappingURL=index.js.map
